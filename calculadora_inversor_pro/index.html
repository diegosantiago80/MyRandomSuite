<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InversorPro - Calculadora de Interés Real</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .magenta-gradient { background: linear-gradient(135deg, #be185d 0%, #9d174d 100%); }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .dark .glass-card { background: rgba(30, 41, 59, 0.8); border-color: rgba(255, 255, 255, 0.1); }
        .input-focus:focus { outline: none; border-color: #be185d; box-shadow: 0 0 0 3px rgba(190, 24, 93, 0.15); }
        
        /* Animación Modal */
        .modal-blur { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        magenta: { 50: '#fdf2f8', 500: '#ec4899', 600: '#db2777', 700: '#be185d', 800: '#9d174d' }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-gray-100 min-h-screen pb-6">

    <nav class="p-4 md:p-6 flex justify-between items-center max-w-6xl mx-auto">
        <div class="flex items-center gap-2">
            <div class="w-9 h-9 md:w-10 md:h-10 magenta-gradient rounded-xl flex items-center justify-center text-white shadow-lg">
                <i data-lucide="trending-up" class="w-5 h-5"></i>
            </div>
            <span class="text-lg md:text-xl font-bold tracking-tight">Inversor<span class="text-magenta-600">Pro</span></span>
        </div>
        <div class="flex items-center gap-2">
            <button onclick="toggleHelp()" class="p-2.5 rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-gray-200 dark:border-slate-700 hover:text-magenta-600 transition-all">
                <i data-lucide="help-circle" class="w-5 h-5"></i>
            </button>
            <button id="themeToggle" class="p-2.5 rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-gray-200 dark:border-slate-700 transition-all">
                <i data-lucide="sun" class="hidden dark:block w-5 h-5 text-yellow-400"></i>
                <i data-lucide="moon" class="block dark:hidden w-5 h-5 text-slate-600"></i>
            </button>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <section class="lg:col-span-8 order-1 lg:order-2 space-y-6">
            <div class="magenta-gradient p-6 md:p-8 rounded-[2rem] text-white shadow-2xl relative overflow-hidden">
                <div class="relative z-10">
                    <div class="flex items-center gap-2 mb-1 opacity-90">
                        <i data-lucide="shield-check" class="w-4 h-4 text-magenta-200"></i>
                        <p class="text-xs md:text-sm font-medium uppercase tracking-wider">Poder de Compra Real (Hoy)</p>
                    </div>
                    <h3 id="realValue" class="text-4xl md:text-5xl font-black my-2">$0.00</h3>
                    <div class="mt-6 pt-4 border-t border-white/20 flex justify-between items-end">
                        <div>
                            <p class="text-magenta-200 text-[10px] uppercase font-bold">Saldo Nominal</p>
                            <h4 id="totalBalance" class="text-xl font-bold">$0.00</h4>
                        </div>
                        <div class="text-right">
                            <p class="text-magenta-200 text-[10px] uppercase font-bold">Inflación Acumulada</p>
                            <h4 id="inflationLoss" class="text-xl font-bold text-orange-300">-$0.00</h4>
                        </div>
                    </div>
                </div>
                <div class="absolute -bottom-6 -right-6 opacity-10">
                    <i data-lucide="trending-up" class="w-32 h-32"></i>
                </div>
            </div>

            <div class="glass-card p-4 md:p-6 rounded-[2rem] shadow-xl">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-3">
                    <h2 class="text-md font-bold flex items-center gap-2">
                        <i data-lucide="bar-chart-3" class="text-magenta-600 w-5 h-5"></i> Proyección Real vs Nominal
                    </h2>
                    <div class="flex gap-3 text-[10px] font-bold">
                        <span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-magenta-600"></span> NOMINAL</span>
                        <span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-orange-500"></span> REAL</span>
                    </div>
                </div>
                <div class="h-[280px] md:h-[400px]">
                    <canvas id="investmentChart"></canvas>
                </div>
            </div>
        </section>

        <section class="lg:col-span-4 order-2 lg:order-1 space-y-6">
            <div class="glass-card p-6 md:p-8 rounded-[2rem] shadow-xl border border-gray-100 dark:border-slate-800">
                <h2 class="text-lg font-bold mb-6 flex items-center gap-2">
                    <i data-lucide="sliders" class="text-magenta-600 w-5 h-5"></i> Configuración
                </h2>
                <div class="space-y-5">
                    <div>
                        <label class="block text-[11px] font-bold mb-1.5 text-gray-500 uppercase">Capital Inicial</label>
                        <input type="number" id="principal" value="1000" class="w-full p-3.5 rounded-xl border border-gray-200 dark:border-slate-700 dark:bg-slate-800 text-lg font-bold input-focus transition-all">
                    </div>
                    <div>
                        <label class="block text-[11px] font-bold mb-1.5 text-gray-500 uppercase">Aporte Mensual</label>
                        <input type="number" id="contribution" value="100" class="w-full p-3.5 rounded-xl border border-gray-200 dark:border-slate-700 dark:bg-slate-800 text-lg font-bold input-focus transition-all">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-100 dark:bg-slate-900/50 p-3 rounded-2xl">
                            <label class="block text-[10px] font-bold mb-1 text-magenta-600 uppercase">Tasa (%)</label>
                            <input type="number" id="rate" value="10" step="0.1" class="w-full bg-transparent text-lg font-bold outline-none">
                        </div>
                        <div class="bg-orange-50 dark:bg-orange-950/20 p-3 rounded-2xl">
                            <label class="block text-[10px] font-bold mb-1 text-orange-600 uppercase">Inflación (%)</label>
                            <input type="number" id="inflation" value="4" step="0.1" class="w-full bg-transparent text-lg font-bold text-orange-500 outline-none">
                        </div>
                    </div>
                    <div>
                        <label class="block text-[11px] font-bold mb-2 text-gray-500 uppercase">Horizonte (Años): <span id="yearVal" class="text-magenta-600">10</span></label>
                        <input type="range" id="years" min="1" max="40" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-magenta-600" oninput="document.getElementById('yearVal').innerText = this.value">
                    </div>
                    <button onclick="calculate()" class="w-full magenta-gradient text-white font-bold py-4 rounded-2xl shadow-xl hover:brightness-110 active:scale-95 transition-all text-lg mt-2 flex items-center justify-center gap-2">
                        Simular Inversión <i data-lucide="zap" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <div id="helpModal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 modal-blur">
        <div class="bg-white dark:bg-slate-800 max-w-md w-full p-8 rounded-[2.5rem] shadow-2xl relative border border-gray-200 dark:border-white/10">
            <button onclick="toggleHelp()" class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 dark:hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
                <i data-lucide="lightbulb" class="text-magenta-600 w-6 h-6"></i> Guía Pro
            </h2>
            <div class="space-y-5 text-sm leading-relaxed text-gray-600 dark:text-gray-300">
                <div class="flex gap-4">
                    <span class="w-6 h-6 rounded-lg bg-magenta-100 dark:bg-magenta-900/30 text-magenta-600 flex items-center justify-center font-bold shrink-0">1</span>
                    <p><strong>Configura tu escenario:</strong> Ingresa cuánto tienes hoy, cuánto ahorrarás por mes y la rentabilidad esperada.</p>
                </div>
                <div class="flex gap-4">
                    <span class="w-6 h-6 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 flex items-center justify-center font-bold shrink-0">2</span>
                    <p><strong>Factor Inflación:</strong> Este es el asesino silencioso. Ajusta el % para ver cuánto valdrá ese dinero "en moneda de hoy".</p>
                </div>
                <div class="flex gap-4">
                    <span class="w-6 h-6 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center font-bold shrink-0">3</span>
                    <p><strong>La Brecha:</strong> La línea naranja (Real) vs la Magenta (Nominal) te muestra cuánta riqueza real estás generando por encima del costo de vida.</p>
                </div>
            </div>
            <button onclick="toggleHelp()" class="mt-8 w-full magenta-gradient text-white font-bold py-4 rounded-xl">Entendido</button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        function toggleHelp() {
            const modal = document.getElementById('helpModal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
        }

        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            setTimeout(calculate, 50);
        });

        let chart;
        const ctx = document.getElementById('investmentChart').getContext('2d');

        function calculate() {
            const P = parseFloat(document.getElementById('principal').value) || 0;
            const PMT = parseFloat(document.getElementById('contribution').value) || 0;
            const annualRate = (parseFloat(document.getElementById('rate').value) || 0) / 100;
            const inflationRate = (parseFloat(document.getElementById('inflation').value) || 0) / 100;
            const years = parseInt(document.getElementById('years').value) || 1;
            
            const months = years * 12;
            const monthlyRate = annualRate / 12;
            const monthlyInflation = inflationRate / 12;
            
            let totalNominal = P;
            let totalInvested = P;
            
            const labels = ['Inic.'];
            const totalData = [P];
            const realData = [P];
            const capitalData = [P];

            for (let i = 1; i <= months; i++) {
                totalNominal = (totalNominal + PMT) * (1 + monthlyRate);
                totalInvested += PMT;
                const currentRealValue = totalNominal / Math.pow(1 + monthlyInflation, i);

                if (i % 12 === 0 || i === months) {
                    labels.push(i % 12 === 0 ? `Añ ${i/12}` : 'Fin');
                    totalData.push(totalNominal.toFixed(2));
                    realData.push(currentRealValue.toFixed(2));
                    capitalData.push(totalInvested.toFixed(2));
                }
            }

            const finalNominal = totalNominal;
            const finalReal = parseFloat(realData[realData.length - 1]);
            const grossProfit = finalNominal - totalInvested;
            const inflationImpact = finalNominal - finalReal;

            document.getElementById('realValue').innerText = '$' + finalReal.toLocaleString('es-AR', {maximumFractionDigits: 0});
            document.getElementById('totalBalance').innerText = '$' + finalNominal.toLocaleString('es-AR', {maximumFractionDigits: 0});
            document.getElementById('inflationLoss').innerText = '-$' + inflationImpact.toLocaleString('es-AR', {maximumFractionDigits: 0});

            updateChart(labels, totalData, realData, capitalData);
        }

        function updateChart(labels, totalData, realData, capitalData) {
            const isDark = document.documentElement.classList.contains('dark');
            const colorText = isDark ? '#94a3b8' : '#64748b';
            const colorGrid = isDark ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
            if (chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Nominal', data: totalData, borderColor: '#be185d', backgroundColor: 'rgba(190, 24, 93, 0.05)', fill: true, tension: 0.4, borderWidth: 3, pointRadius: 0 },
                        { label: 'Real', data: realData, borderColor: '#f97316', fill: false, tension: 0.4, borderWidth: 3, pointRadius: 0 },
                        { label: 'Aportes', data: capitalData, borderColor: isDark ? '#334155' : '#cbd5e1', borderDash: [5, 5], fill: false, tension: 0, borderWidth: 1, pointRadius: 0 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: colorGrid }, ticks: { color: colorText, font: { size: 10 }, callback: v => '$' + (v >= 1e6 ? (v/1e6).toFixed(1) + 'M' : (v/1e3).toFixed(0) + 'k') } },
                        x: { grid: { display: false }, ticks: { color: colorText, font: { size: 9 } } }
                    }
                }
            });
        }
        window.onload = calculate;
    </script>
</body>
</html>
